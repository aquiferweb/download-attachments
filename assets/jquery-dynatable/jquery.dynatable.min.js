!function(m){var a,n,y,t,b,r,e,s={dom:function(l,c){this.update=function(){var t="",e=c.table.columns,a=c.writers._rowWriter,n=c.writers._cellWriter;l.$element.trigger("dynatable:beforeUpdate",t);for(var r,s=0,i=c.dataset.records.length;s<i;s++){t+=a(s,c.dataset.records[s],e,n)}if(c.features.recordCount&&m("#dynatable-record-count-"+l.element.id).replaceWith(l.recordsCount.create()),c.features.paginate&&(m("#dynatable-pagination-links-"+l.element.id).replaceWith(l.paginationLinks.create()),c.features.perPageSelect&&m("#dynatable-per-page-"+l.element.id).val(parseInt(c.dataset.perPage))),c.features.sort&&e){l.sortsHeaders.removeAllArrows();for(s=0,i=e.length;s<i;s++){var o=e[s],d=b.allMatch(c.dataset.sorts,o.sorts,function(t,e){return e in t}),u=c.dataset.sorts[o.sorts[0]];d&&l.$element.find('[data-dynatable-column="'+o.id+'"]').find(".dynatable-sort-header").each(function(){1==u?l.sortsHeaders.appendArrowUp(m(this)):l.sortsHeaders.appendArrowDown(m(this))})}}(c.inputs.queries||c.features.search)&&(r=c.inputs.queries||m(),c.features.search&&(r=r.add("#dynatable-query-search-"+l.element.id)),r.each(function(){var t=m(this),e=c.dataset.queries[t.data("dynatable-query")];t.val(e||"")})),l.$element.find(c.table.bodyRowSelector).remove(),l.$element.append(t),l.$element.trigger("dynatable:afterUpdate",t)}},domColumns:function(f,g){var e=this;this.initOnLoad=function(){return f.$element.is("table")},this.init=function(){g.table.columns=[],this.getFromTable()},this.getFromTable=function(){var t=f.$element.find(g.table.headRowSelector).children("th,td");if(!t.length)return m.error("Couldn't find any columns headers in '"+g.table.headRowSelector+" th,td'. If your header row is different, specify the selector in the table: headRowSelector option.");t.each(function(t){e.add(m(this),t,!0)})},this.add=function(t,e,a,n){var r=g.table.columns,s=t.text(),i=t.data("dynatable-column")||b.normalizeText(s,g.table.defaultColumnIdStyle),o=t.data("dynatable-sorts"),d=o?m.map(o.split(","),function(t){return t.trim()}):[i];if(i||(this.generate(t),i=t.data("dynatable-column")),r.splice(e,0,{index:e,label:s,id:i,attributeWriter:g.writers[i]||g.writers._attributeWriter,attributeReader:g.readers[i]||g.readers._attributeReader,sorts:d,hidden:"none"===t.css("display"),textAlign:t.css("text-align")}),t.attr("data-dynatable-column",i).addClass("dynatable-head"),g.table.headRowClass&&t.addClass(g.table.headRowClass),!a){var u=e+1,l=f.$element.find(g.table.headRowSelector).children("th:nth-child("+u+"),td:nth-child("+u+")").first(),c=r.slice(e+1,r.length);if(l.length?l.before(t):f.$element.find(g.table.headRowSelector).append(t),f.sortsHeaders.attachOne(t.get()),c.length)for(var h=0,p=c.length;h<p;h++)c[h].index+=1;n||f.dom.update()}return y},this.remove=function(t){var e=g.table.columns;e.length;if("number"==typeof t){var a=e[t];this.removeFromTable(a.id),this.removeFromArray(t)}else for(var n=e.length-1;0<=n;n--){(a=e[n]).id===t&&(this.removeFromTable(t),this.removeFromArray(n))}f.dom.update()},this.removeFromTable=function(t){f.$element.find(g.table.headRowSelector).children('[data-dynatable-column="'+t+'"]').first().remove()},this.removeFromArray=function(t){var e,a=g.table.columns;a.splice(t,1);for(var n=0,r=(e=a.slice(t,a.length)).length;n<r;n++)--e[n].index},this.generate=function(t){var e=void 0===t?m("<th></th>"):t;return this.attachGeneratedAttributes(e)},this.attachGeneratedAttributes=function(t){var e=f.$element.find(g.table.headRowSelector).children("th[data-dynatable-generated]").length;return t.attr("data-dynatable-column","dynatable-generated-"+e).attr("data-dynatable-no-sort","true").attr("data-dynatable-generated",e)}},records:function(c,s){this.initOnLoad=function(){return!s.dataset.ajax},this.init=function(){null===s.dataset.records&&(s.dataset.records=this.getFromTable(),s.dataset.queryRecordCount||(s.dataset.queryRecordCount=this.count()),s.dataset.totalRecordCount||(s.dataset.totalRecordCount=s.dataset.queryRecordCount)),s.dataset.originalRecords=m.extend(!0,[],s.dataset.records)},this.updateFromJson=function(t){var e;if("_root"===s.params.records?e=t:s.params.records in t&&(e=t[s.params.records]),s.params.record)for(var a=e.length-1,n=0;n<a;n++)e[n]=e[n][s.params.record];s.params.queryRecordCount in t&&(s.dataset.queryRecordCount=t[s.params.queryRecordCount]),s.params.totalRecordCount in t&&(s.dataset.totalRecordCount=t[s.params.totalRecordCount]),s.dataset.records=e},this.sort=function(){var t=[].sort,d=s.dataset.sorts,u=s.dataset.sortsKeys,l=s.dataset.sortTypes;return t.call(s.dataset.records,function(t,e){if(m.isEmptyObject(d))r=c.sorts.functions.originalPlacement(t,e);else for(var a=0,n=u.length;a<n;a++){var r,s=u[a],i=d[s],o=l[s]||c.sorts.guessType(t,e,s);if(0!==(r=c.sorts.functions[o](t,e,s,i)))break}return r})},this.paginate=function(){var t=this.pageBounds(),e=t[0],a=t[1];s.dataset.records=s.dataset.records.slice(e,a)},this.resetOriginal=function(){s.dataset.records=s.dataset.originalRecords||[]},this.pageBounds=function(){var t=((s.dataset.page||1)-1)*s.dataset.perPage;return[t,Math.min(t+s.dataset.perPage,s.dataset.queryRecordCount)]},this.getFromTable=function(){var e=[],r=s.table.columns;return c.$element.find(s.table.bodyRowSelector).each(function(t){var n={};n["dynatable-original-index"]=t,m(this).find("th,td").each(function(t){void 0===r[t]&&c.domColumns.add(c.domColumns.generate(),r.length,!1,!0);var e=r[t].attributeReader(this,n),a=r[t].id;"string"==typeof e&&e.match(/\s*\<.+\>/)&&(n["dynatable-sortable-text"]||(n["dynatable-sortable-text"]={}),n["dynatable-sortable-text"][a]=m("<div></div>").html(e).text().trim()),n[a]=e}),"function"==typeof s.readers._rowReader&&s.readers._rowReader(t,this,n),e.push(n)}),e},this.count=function(){return s.dataset.records.length}},recordsCount:function(i,o){this.initOnLoad=function(){return o.features.recordCount},this.init=function(){this.attach()},this.create=function(){var t,e=i.records.count(),a=o.dataset.queryRecordCount,n=o.dataset.totalRecordCount,r=o.inputs.recordCountText,s=o.params.records;return e<a&&o.features.paginate?r+="<span class='dynatable-record-bounds'>"+((t=i.records.pageBounds())[0]+1)+" to "+t[1]+"</span> of ":e===a&&o.features.paginate&&(r+=e+" of "),r+=a+" "+s,a<n&&(r+=" (filtered from "+n+" total records)"),m("<span></span>",{id:"dynatable-record-count-"+i.element.id,class:"dynatable-record-count",html:r})},this.attach=function(){(o.inputs.recordCountTarget?m(o.inputs.recordCountTarget):i.$element)[o.inputs.recordCountPlacement](this.create())}},processingIndicator:function(d,t){this.init=function(){this.attach()},this.create=function(){return m("<div></div>",{html:"<span>"+t.inputs.processingText+"</span>",id:"dynatable-processing-"+d.element.id,class:"dynatable-processing",style:"position: absolute; display: none;"})},this.position=function(){var t=m("#dynatable-processing-"+d.element.id),e=t.children("span"),a=e.outerHeight(),n=e.outerWidth(),r=d.$element,s=r.offset(),i=r.outerHeight(),o=r.outerWidth();return t.offset({left:s.left,top:s.top}).width(o).height(i),e.offset({left:s.left+(o-n)/2,top:s.top+(i-a)/2}),t},this.attach=function(){d.$element.before(this.create())},this.show=function(){m("#dynatable-processing-"+d.element.id).show(),this.position()},this.hide=function(){m("#dynatable-processing-"+d.element.id).hide()}},state:function(d,u){this.initOnLoad=function(){return u.features.pushState&&history.pushState},this.init=function(){window.onpopstate=function(t){t.state&&t.state.dynatable&&d.state.pop(t)}},this.push=function(t){var e,a,n,r,s=window.location.search,i=!(window.history.state&&window.history.state.dynatable),o=i?"replaceState":"pushState";s&&/^\?/.test(s)&&(s=s.substring(1)),m.extend(void 0,t),a=(a=b.refreshQueryString(s,t,u))&&"?"+a,n=window.location.hash,e=window.location.pathname,d.$element.trigger("dynatable:push",t),r={dynatable:{dataset:u.dataset}},i||(r.dynatable.scrollTop=m(window).scrollTop()),JSON.stringify(r),r.dynatable.dataset.perPageOptions=m.makeArray(r.dynatable.dataset.perPageOptions);try{window.history[o](r,"Dynatable state",e+a+n)}catch(t){r.dynatable.dataset.records=null,window.history[o](r,"Dynatable state",e+a+n)}},this.pop=function(t){var e=t.state.dynatable;u.dataset=e.dataset,e.scrollTop&&m(window).scrollTop(e.scrollTop),e.dataset.records?d.dom.update():d.process(!0)}},sorts:function(t,r){this.initOnLoad=function(){return r.features.sort},this.init=function(){var t=window.location.search.match(new RegExp(r.params.sorts+"[^&=]*=[^&]*","g"));r.dataset.sorts=t?b.deserialize(t)[r.params.sorts]:{},r.dataset.sortsKeys=t?b.keysFromObject(r.dataset.sorts):[]},this.add=function(t,e){var a=r.dataset.sortsKeys,n=m.inArray(t,a);return r.dataset.sorts[t]=e,-1===n&&a.push(t),y},this.remove=function(t){var e=r.dataset.sortsKeys,a=m.inArray(t,e);return delete r.dataset.sorts[t],-1!==a&&e.splice(a,1),y},this.clear=function(){r.dataset.sorts={},r.dataset.sortsKeys.length=0},this.guessType=function(t,e,a){return{string:"string",number:"number",boolean:"number",object:"number"}[t[a]?typeof t[a]:typeof e[a]]||"number"},this.functions={number:function(t,e,a,n){return t[a]===e[a]?0:0<n?t[a]-e[a]:e[a]-t[a]},string:function(t,e,a,n){var r=t["dynatable-sortable-text"]&&t["dynatable-sortable-text"][a]?t["dynatable-sortable-text"][a]:t[a],s=e["dynatable-sortable-text"]&&e["dynatable-sortable-text"][a]?e["dynatable-sortable-text"][a]:e[a],i=(r=r.toLowerCase())===(s=s.toLowerCase())?0:0<n?s<r:r<s;return!1===i?-1:+i},originalPlacement:function(t,e){return t["dynatable-original-index"]-e["dynatable-original-index"]}}},sortsHeaders:function(o,d){var s=this;this.initOnLoad=function(){return d.features.sort},this.init=function(){this.attach()},this.create=function(t){var e=m(t),a=m("<a></a>",{class:"dynatable-sort-header",href:"#",html:e.html()}),n=e.data("dynatable-column"),r=b.findObjectInArray(d.table.columns,{id:n});return a.on("click",function(t){s.toggleSort(t,a,r),o.process(),t.preventDefault()}),this.sortedByColumn(a,r)&&(1==this.sortedByColumnValue(r)?this.appendArrowUp(a):this.appendArrowDown(a)),a},this.removeAll=function(){o.$element.find(d.table.headRowSelector).children("th,td").each(function(){s.removeAllArrows(),s.removeOne(this)})},this.removeOne=function(t){var e,a=m(t),n=a.find(".dynatable-sort-header");n.length&&(e=n.html(),n.remove(),a.html(a.html()+e))},this.attach=function(){o.$element.find(d.table.headRowSelector).children("th,td").each(function(){s.attachOne(this)})},this.attachOne=function(t){var e=m(t);e.data("dynatable-no-sort")||e.html(this.create(t))},this.appendArrowUp=function(t){this.removeArrow(t),t.append("<span class='dynatable-arrow'> &#9650;</span>")},this.appendArrowDown=function(t){this.removeArrow(t),t.append("<span class='dynatable-arrow'> &#9660;</span>")},this.removeArrow=function(t){t.find(".dynatable-arrow").remove()},this.removeAllArrows=function(){o.$element.find(".dynatable-arrow").remove()},this.toggleSort=function(a,t,e){var n=this.sortedByColumn(t,e),r=this.sortedByColumnValue(e);if(d.inputs.multisort&&b.anyMatch(a,d.inputs.multisort,function(t,e){return a[e]})||(this.removeAllArrows(),o.sorts.clear()),n)if(1==r){for(var s=0,i=e.sorts.length;s<i;s++)o.sorts.add(e.sorts[s],-1);this.appendArrowDown(t)}else{for(s=0,i=e.sorts.length;s<i;s++)o.sorts.remove(e.sorts[s]);this.removeArrow(t)}else{for(s=0,i=e.sorts.length;s<i;s++)o.sorts.add(e.sorts[s],1);this.appendArrowUp(t)}},this.sortedByColumn=function(t,e){return b.allMatch(d.dataset.sorts,e.sorts,function(t,e){return e in t})},this.sortedByColumnValue=function(t){return d.dataset.sorts[t.sorts[0]]}},queries:function(r,s){var i=this;this.initOnLoad=function(){return s.inputs.queries||s.features.search},this.init=function(){var t=window.location.search.match(new RegExp(s.params.queries+"[^&=]*=[^&]*","g"));s.dataset.queries=t?b.deserialize(t)[s.params.queries]:{},""===s.dataset.queries&&(s.dataset.queries={}),s.inputs.queries&&this.setupInputs()},this.add=function(t,e){return s.features.paginate&&(s.dataset.page=1),s.dataset.queries[t]=e,y},this.remove=function(t){return delete s.dataset.queries[t],y},this.run=function(){for(query in s.dataset.queries)if(s.dataset.queries.hasOwnProperty(query)){var e=s.dataset.queries[query];if(void 0===i.functions[query]){if(!b.findObjectInArray(s.table.columns,{id:query})){m.error("Query named '"+query+"' called, but not defined in queries.functions");continue}i.functions[query]=function(t,e){return t[query]==e}}s.dataset.records=m.map(s.dataset.records,function(t){return i.functions[query](t,e)?t:null})}s.dataset.queryRecordCount=r.records.count()},this.runSearch=function(t){var e=m.extend({},s.dataset.queries);t?this.add("search",t):this.remove("search"),b.objectsEqual(s.dataset.queries,e)||r.process()},this.setupInputs=function(){s.inputs.queries.each(function(){function e(t){var e=m(this).val();if(""===e&&(e=void 0),e===s.dataset.queries[n])return!1;e?i.add(n,e):i.remove(n),r.process(),t.preventDefault()}var t=m(this),a=t.data("dynatable-query-event")||s.inputs.queryEvent,n=t.data("dynatable-query")||t.attr("name")||this.id;t.attr("data-dynatable-query",n).on(a,e).on("keypress",function(t){13==t.which&&e.call(this,t)}),s.dataset.queries[n]&&t.val(decodeURIComponent(s.dataset.queries[n]))})},this.functions={search:function(t,e){var a=!1;for(attr in t)if(t.hasOwnProperty(attr)){var n=t[attr];if("string"!=typeof n||-1===n.toLowerCase().indexOf(e.toLowerCase()))continue;a=!0;break}return a}}},inputsSearch:function(a,n){this.initOnLoad=function(){return n.features.search},this.init=function(){this.attach()},this.create=function(){var t=m("<input />",{type:"search",id:"dynatable-query-search-"+a.element.id,"data-dynatable-query":"search",value:n.dataset.queries.search}),e=m("<span></span>",{id:"dynatable-search-"+a.element.id,class:"dynatable-search",text:"Search: "}).append(t);return t.on(n.inputs.queryEvent,function(){a.queries.runSearch(m(this).val())}).on("keypress",function(t){13==t.which&&(a.queries.runSearch(m(this).val()),t.preventDefault())}),e},this.attach=function(){(n.inputs.searchTarget?m(n.inputs.searchTarget):a.$element)[n.inputs.searchPlacement](this.create())}},paginationPage:function(t,e){this.initOnLoad=function(){return e.features.paginate},this.init=function(){var t=window.location.search.match(new RegExp(e.params.page+"=([^&]*)"));t&&e.features.pushState?this.set(t[1]):this.set(1)},this.set=function(t){e.dataset.page=parseInt(t,10)}},paginationPerPage:function(s,i){var o=this;this.initOnLoad=function(){return i.features.paginate},this.init=function(){var t=window.location.search.match(new RegExp(i.params.perPage+"=([^&]*)"));t&&i.features.pushState?this.set(t[1],!0):this.set(i.dataset.perPageDefault,!0),i.features.perPageSelect&&this.attach()},this.create=function(){for(var t=m("<select>",{id:"dynatable-per-page-"+s.element.id,class:"dynatable-per-page-select"}),e=0,a=i.dataset.perPageOptions.length;e<a;e++){var n=i.dataset.perPageOptions[e],r=i.dataset.perPage==n?'selected="selected"':"";t.append('<option value="'+n+'" '+r+">"+n+"</option>")}return t.on("change",function(t){o.set(m(this).val()),s.process()}),m("<span />",{class:"dynatable-per-page"}).append("<span class='dynatable-per-page-label'>"+i.inputs.perPageText+"</span>").append(t)},this.attach=function(){(i.inputs.perPageTarget?m(i.inputs.perPageTarget):s.$element)[i.inputs.perPagePlacement](this.create())},this.set=function(t,e){e||s.paginationPage.set(1),i.dataset.perPage=parseInt(t)}},paginationLinks:function(p,f){this.initOnLoad=function(){return f.features.paginate},this.init=function(){this.attach()},this.create=function(){var t='<ul id="dynatable-pagination-links-'+p.element.id+'" class="'+f.inputs.paginationClass+'">',e=f.inputs.paginationLinkClass,a=f.inputs.paginationActiveClass,n=f.inputs.paginationDisabledClass,r=Math.ceil(f.dataset.queryRecordCount/f.dataset.perPage),s=f.dataset.page,i=[f.inputs.paginationGap[0],f.dataset.page-f.inputs.paginationGap[1],f.dataset.page+f.inputs.paginationGap[2],r+1-f.inputs.paginationGap[3]];t+="<li><span>Pages: </span></li>";for(var o,d,u,l,c=1;c<=r;c++){i[0]<c&&c<i[1]||i[2]<c&&c<i[3]||(d=p.paginationLinks.buildLink(c,c,e,s==c,a),l=i[(u=m.inArray(c,i))+1],0<u&&1!==c&&l&&c+1<l&&(o='<li><span class="dynatable-page-break">&hellip;</span></li>',d=u<2?o+d:d+o),f.inputs.paginationPrev&&1===c&&(d=p.paginationLinks.buildLink(s-1,f.inputs.paginationPrev,e+" "+f.inputs.paginationPrevClass,1===s,n)+d),f.inputs.paginationNext&&c===r&&(d+=p.paginationLinks.buildLink(s+1,f.inputs.paginationNext,e+" "+f.inputs.paginationNextClass,s===r,n)),t+=d)}t+="</ul>";var h="#dynatable-pagination-links-"+p.element.id+" a."+e+":not(."+a+",."+n+")";return m(document).off(h,"click.dynatable"),m(document).on(h,"click.dynatable",function(t){$this=m(this),$this.closest(f.inputs.paginationClass).find("."+a).removeClass(a),$this.addClass(a),p.paginationPage.set($this.data("dynatable-page")),p.process(),t.preventDefault()}),t},this.buildLink=function(t,e,a,n,r){var s="<a data-dynatable-page="+t+' class="'+a,i="<li";return n&&(s+=" "+r,i+=' class="'+r+'"'),i+=">"+(s+='">'+e+"</a>")+"</li>"},this.attach=function(){(f.inputs.paginationLinkTarget?m(f.inputs.paginationLinkTarget):p.$element)[f.inputs.paginationLinkPlacement](p.paginationLinks.create())}}};for(model in a={features:{paginate:!0,sort:!0,pushState:!0,search:!0,recordCount:!0,perPageSelect:!0},table:{defaultColumnIdStyle:"camelCase",columns:null,headRowSelector:"thead tr",bodyRowSelector:"tbody tr",headRowClass:null},inputs:{queries:null,sorts:null,multisort:["ctrlKey","shiftKey","metaKey"],page:null,queryEvent:"blur change",recordCountTarget:null,recordCountPlacement:"after",paginationLinkTarget:null,paginationLinkPlacement:"after",paginationClass:"dynatable-pagination-links",paginationLinkClass:"dynatable-page-link",paginationPrevClass:"dynatable-page-prev",paginationNextClass:"dynatable-page-next",paginationActiveClass:"dynatable-active-page",paginationDisabledClass:"dynatable-disabled-page",paginationPrev:"Previous",paginationNext:"Next",paginationGap:[1,2,2,1],searchTarget:null,searchPlacement:"before",perPageTarget:null,perPagePlacement:"before",perPageText:"Show: ",recordCountText:"Showing ",processingText:"Processing..."},dataset:{ajax:!1,ajaxUrl:null,ajaxCache:null,ajaxOnLoad:!1,ajaxMethod:"GET",ajaxDataType:"json",totalRecordCount:null,queries:{},queryRecordCount:null,page:null,perPageDefault:10,perPageOptions:[10,20,50,100],sorts:{},sortsKeys:null,sortTypes:{},records:null},writers:{_rowWriter:function(t,e,a,n){for(var r="",s=0,i=a.length;s<i;s++)r+=n(a[s],e);return"<tr>"+r+"</tr>"},_cellWriter:function(t,e){var a=t.attributeWriter(e),n="<td";(t.hidden||t.textAlign)&&(n+=' style="',t.hidden&&(n+="display: none;"),t.textAlign&&(n+="text-align: "+t.textAlign+";"),n+='"');return n+">"+a+"</td>"},_attributeWriter:function(t){return t[this.id]}},readers:{_rowReader:null,_attributeReader:function(t,e){return m(t).html()}},params:{dynatable:"dynatable",queries:"queries",sorts:"sorts",page:"page",perPage:"perPage",offset:"offset",records:"records",record:null,queryRecordCount:"queryRecordCount",totalRecordCount:"totalRecordCount"}},y={init:function(t,e){return this.settings=n(e),this.element=t,this.$element=m(t),r.call(this),this},process:function(t){e.call(this,t)}},n=function(t){var e=m.extend(!0,{},a,t);return t&&(t.inputs&&(t.inputs.multisort&&(e.inputs.multisort=t.inputs.multisort),t.inputs.paginationGap&&(e.inputs.paginationGap=t.inputs.paginationGap)),t.dataset&&t.dataset.perPageOptions&&(e.dataset.perPageOptions=t.dataset.perPageOptions)),e},r=function(){for(model in this.$element.trigger("dynatable:preinit",this),s){var t;!s.hasOwnProperty(model)||(t=this[model]=new s[model](this,this.settings)).initOnLoad()&&t.init()}this.$element.trigger("dynatable:init",this),(!this.settings.dataset.ajax||this.settings.dataset.ajax&&this.settings.dataset.ajaxOnLoad||this.settings.features.paginate)&&this.process()},e=function(e){var t,a,n,r,s={};this.$element.trigger("dynatable:beforeProcess",s),m.isEmptyObject(this.settings.dataset.queries)||(s[this.settings.params.queries]=this.settings.dataset.queries),this.processingIndicator.show(),this.settings.features.sort&&!m.isEmptyObject(this.settings.dataset.sorts)&&(s[this.settings.params.sorts]=this.settings.dataset.sorts),this.settings.features.paginate&&this.settings.dataset.page&&(t=this.settings.dataset.page,a=this.settings.dataset.perPage,s[this.settings.params.page]=t,s[this.settings.params.perPage]=a,s[this.settings.params.offset]=(t-1)*a),this.settings.dataset.ajaxData&&m.extend(s,this.settings.dataset.ajaxData),this.settings.dataset.ajax?(r={type:(n=this).settings.dataset.ajaxMethod,dataType:n.settings.dataset.ajaxDataType,data:s,error:function(t,e){},success:function(t){n.$element.trigger("dynatable:ajax:success",t),n.records.updateFromJson(t),n.dom.update(),!e&&n.state.initOnLoad()&&n.state.push(s)},complete:function(){n.processingIndicator.hide()}},this.settings.dataset.ajaxUrl?r.url=this.settings.dataset.ajaxUrl:r.url=b.refreshQueryString(window.location.href,{},this.settings),null!==this.settings.dataset.ajaxCache&&(r.cache=this.settings.dataset.ajaxCache),m.ajax(r)):(this.records.resetOriginal(),this.queries.run(),this.settings.features.sort&&this.records.sort(),this.settings.features.paginate&&this.records.paginate(),this.dom.update(),this.processingIndicator.hide(),!e&&this.state.initOnLoad()&&this.state.push(s)),this.$element.trigger("dynatable:afterProcess",s)},t={initOnLoad:function(){return!0},init:function(){}},s){s.hasOwnProperty(model)&&(s[model].prototype=t)}b=y.utility={normalizeText:function(t,e){return t=this.textTransform[e](t)},textTransform:{trimDash:function(t){return t.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"-")},camelCase:function(t){return(t=this.trimDash(t)).replace(/(\-[a-zA-Z])/g,function(t){return t.toUpperCase().replace("-","")}).replace(/([A-Z])([A-Z]+)/g,function(t,e,a){return e+a.toLowerCase()}).replace(/^[A-Z]/,function(t){return t.toLowerCase()})},dashed:function(t){return t=this.trimDash(t),this.lowercase(t)},underscore:function(t){return t=this.trimDash(t),this.lowercase(t.replace(/(-)/g,"_"))},lowercase:function(t){return t.replace(/([A-Z])/g,function(t){return t.toLowerCase()})}},deserialize:function(t){if(!t)return{};"object"==typeof t&&(t=t.join("&"));for(var e={},a=t.split("&"),n=0;n<a.length;n++){var r,s=a[n].split("="),i=decodeURIComponent(s[0]);if(s[1]){for(d=decodeURIComponent(s[1].replace(/\+/g," "));r=i.match(/([^&=]+)\[([^&=]+)\]$/);){var o=d,i=r[1],d={};"]["==r[2].substr(r[2].length-2)?d[r[2].substr(0,r[2].length-2)]=[o]:d[r[2]]=o}void 0===e[i]?"[]"!=i.substr(i.length-2)?e[i]=d:e[i]=[d]:"string"==typeof e[i]?e[i]=d:"object"==typeof e[i]?e[i]=m.extend({},e[i],d):e[i].push(d)}}return e},refreshQueryString:function(t,e,a){t.split("?").shift();var n=this.deserialize(t);for(u in a.params)if(a.params.hasOwnProperty(u)){var r=a.params[u];if(!a.features.sort&&"sorts"==u||!a.features.paginate&&this.anyMatch(u,["page","perPage","offset"],function(t,e){return t==e}))continue;if(("page"===u||"offset"===u)&&1===e.page){n[r]&&delete n[r];continue}if("perPage"===u&&e[r]==a.dataset.perPageDefault){n[r]&&delete n[r];continue}if("queries"==u&&e[r]){var s=a.inputs.queries||[],i=m.makeArray(s.map(function(){return m(this).attr("name")}));a.features.search&&i.push("search");for(var o=0,d=i.length;o<d;o++){var u=i[o];e[r][u]?(void 0===n[r]&&(n[r]={}),n[r][u]=e[r][u]):delete n[r][u]}continue}e[r]?n[r]=e[r]:delete n[r]}return decodeURI(m.param(n))},keysFromObject:function(t){var e=[];for(var a in t)e.push(a);return e},findObjectInArray:function(t,e){for(var a,n=0,r=t.length;n<r;n++){var s=t[n];if(this.allMatch(s,e,function(t,e,a){return t[e]==a})){a=s;break}}return a},allMatch:function(a,t,n){var r=!0,s=Array.isArray(t);return m.each(t,function(t,e){if(!(s?n(a,e):n(a,t,e)))return r=!1}),r},anyMatch:function(a,t,n){var r=!1,s=Array.isArray(t);return m.each(t,function(t,e){if(s?n(a,e):n(a,t,e))return!(r=!0)}),r},objectsEqual:function(t,e){for(attr in t)if(t.hasOwnProperty(attr)&&(!e.hasOwnProperty(attr)||t[attr]!==e[attr]))return!1;for(attr in e)if(e.hasOwnProperty(attr)&&!t.hasOwnProperty(attr))return!1;return!0},randomHash:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)}},"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),m.dynatableSetup=function(t){a=n(t)},m.dynatable=function(e){m.fn.dynatable=function(t){return this.each(function(){m.data(this,"dynatable")||m.data(this,"dynatable",Object.create(e).init(this,t))})}},m.dynatable(y)}(jQuery);